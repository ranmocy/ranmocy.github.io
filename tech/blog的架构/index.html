<!DOCTYPE html><html><head><title>Blog 的架构</title><meta charset="utf-8" http-equiv="Content-Type" /><meta content="Ranmocy" name="author" /><meta content="Jan 29 2012" name="description" /><meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" /><link href="https://plus.google.com/+WanzhangSheng" rel="author" /><link href="https://plus.google.com/+WanzhangSheng" rel="publisher" /><link href="atom.xml" rel="alternate" title="Blog 的架构" type="application/atom+xml" /><meta content="blog" property="og:type" /><meta content="Blog 的架构" property="og:title" /><meta content="这个博客系统是基于 `Ruby on Rails 3.2rc2` 构建的。参加 [GitCafe](http://www.gitcafe.com/) 的开发后学习到了很多关于 Rails 的东西..." property="og:description" /><meta content="https://ranmocy.me/favicon.ico" property="og:image" /><meta content="summary" name="twitter:card" /><meta content="@ranmocy" name="twitter:site" /><meta content="Blog 的架构" name="twitter:title" /><meta content="这个博客系统是基于 `Ruby on Rails 3.2rc2` 构建的。参加 [GitCafe](http://www.gitcafe.com/) 的开发后学习到了很多关于 Rails 的东西..." name="twitter:description" /><meta content="https://ranmocy.me/favicon.ico" name="twitter:image" /><meta content="@ranmocy" name="twitter:creator" /><meta content="https://ranmocy.me" name="twitter:domain" /><link href="/icons/favicon.ico" rel="icon" type="image/x-icon" /><link href="/icons/favicon.ico" rel="shortcut icon" type="image/x-icon" /><link href="/icons/Icon-60@2x.png" rel="apple-touch-icon" /><link href="/icons/Icon-60@3x.png" rel="apple-touch-icon" sizes="180x180" /><link href="/icons/Icon-76.png" rel="apple-touch-icon" sizes="76x76" /><link href="/icons/Icon-76@2x.png" rel="apple-touch-icon" sizes="152x152" /><link href="/icons/Icon-Small@2x.png" rel="apple-touch-icon" sizes="58x58" /><link href='/assets/stylesheets/default.css' media='screen' rel='stylesheet' type='text/css'></head><body class="typo"><nav><span class="title"><a href='/' >Blog 的架构</a></span><span class="date">Jan 29 2012</span><span class="link"><a href='/categories/' >Categories</a><a href='/memories/' >Memories</a><a href='/about/' >About</a></span></nav><main><article><p>这个博客系统是基于 <code>Ruby on Rails 3.2rc2</code> 构建的。参加 <a href="http://www.gitcafe.com/">GitCafe</a> 的开发后学习到了很多关于 Rails 的东西，于是使用了如下 <code>Gem</code> 包重构了博客：</p>

<ol>
<li><p><code>devise</code> 用于账号管理相关的功能，十分强大，但同时也配置比较复杂。</p></li>
<li><p><code>slim-rails</code> slim 语言可以简化 erb 文件的编写，将一切冗余剔除。利用类似 yaml 的风格来处理嵌套和结构。这样所有的结束符都不需要写了。用过之后再也不想写 html 或是 erb 了。视图就清理出来了。</p></li>
<li><p><code>inherited_resources</code> 将标准的 CRUD 操作完全打包，只需要继承 <code>Class OoxxController &amp;lt; InheritedResource::Base</code>，就有了完整的七个操作，而且自定义也十分简单。控制器会变得无比干净。</p></li>
<li><p><code>inherited_resources_views</code> 这个依赖于上一个包，既然控制器继承自 <code>InheritedResource::Base</code>，那么利用 Rails 3.1 的视图继承特性可以将标准的表单视图全部去掉，统一继承自 <code>app/views/inherited_resource/base/</code>。这个组件只需要生成一次视图即可移除。唯一的问题在于默认生成在 <code>app/views/inherited_resource/</code>，需要手动移动。</p></li>
<li><p><code>redcarpet</code> 用于 <a href="http://daringfireball.net/projects/markdown/syntax">Markdown</a> 处理，新版变得无比强大和复杂，支持多种标记语言。</p></li>
<li><p><code>crack</code> 用于处理 XML 和 JSON 的读取。这个功能做成了一个 rake 任务，从 XML 文件中恢复数据库。导出直接使用视图层提供的指定 format 输出来获取 XML 文件。这个功能就像这个 Gem 包的名字一样，完全是图省事的一个简单暴力的解决方案。已经从 RubyGems 移动到了 GitHub Gems 中去了。可以在 Gemfile 中添加 <code>gem 'crack', git: 'git://github.com/jnunemaker/crack.git'</code>，来加入到 Rails 中。或是 <code>gem install jnunemaker-crack -s http://gem.github.com/</code> 来添加到系统中去。</p></li>
<li><p><code>sass</code> &amp; <code>compass</code> 在 Rails 3.1 之后 sass 就默认被包含进了 Rails。这个想 slim 一样用类似 yml 风格来处理 css 嵌套。并且提供更为强大的变量和 mixin 处理。加上 <code>compass</code> 框架，css 的兼容性和扩展性变得无比强大和简单。<code>compass</code> 包含常见的 IE 兼容性处理，css 圆角，多浏览器兼容的各类阴影，分栏效果，按钮 <code>sprite</code> 等等。</p></li>
</ol>


<p>有了这些 Gem 包的辅助，代码量直线下降，而且更为清晰易于扩展。实属居家旅行必备之 Gem 包。</p>
</article><div id="disqus_thread"></div><script>/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'ranmocyblog'; // required: replace example with your forum shortname
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><a class="dsq-brlink" href="http://disqus.com">comments powered by<span class="logo-disqus">Disqus</span></a></main><footer><div class="piece"><span>我努力将诸多人格中微小的片面拼合。</span><span>我拨开我的大脑，只为博君一笑。</span></div><div class="piece"><span>Created by: <a href='/about/' rel="author" title="Ranmocy">Ranmocy</a></span><span>Hosted at: <a href='https://github.com/ranmocy/Brain' rel="friend" title="Firebase" target="_blank">Firebase</a></span></div><div class="piece"><span>&copy;Copyright 1991-2020 Ranmocy.</span><span>All Rights Reserved.</span></div></footer><script>var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-20961770-4']); _gaq.push(['_trackPageview']); (function() {var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script></body></html>